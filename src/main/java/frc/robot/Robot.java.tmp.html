<p>/<em>----------------------------------------------------------------------------</em>/
/* Copyright (c) 2018 FIRST. All Rights Reserved. <em>/
/</em> Open Source Software - may be modified and shared by FRC teams. The code <em>/
/</em> must be accompanied by the FIRST BSD license file in the root directory of <em>/
/</em> the project. <em>/
/</em>----------------------------------------------------------------------------*/
package frc.robot;</p>

<p>import edu.wpi.first.wpilibj.TimedRobot;
import edu.wpi.first.wpilibj.shuffleboard.Shuffleboard;
import frc.robot.lib.util.Logger;
import frc.robot.subsystems.CargoArm;
import frc.robot.subsystems.Drive;
import frc.robot.subsystems.HatchArm;
import frc.robot.subsystems.Superstructure;
import frc.robot.subsystems.Vision;
import java.util.Arrays;</p>

<p>public class Robot extends TimedRobot {</p>

<pre><code>public static MatchState mMatchState = MatchState.DISABLED;
private final SubsystemManager mSubsystemManager =
    new SubsystemManager(Arrays.asList(CargoArm.getInstance(), Drive.getInstance(), HatchArm.getInstance(), Superstructure.getInstance(), Vision.getInstance()));

public Robot() {
    super(Constants.GENERAL.kMainLoopDt);
    Logger.logRobotConstruction();
}

@Override public void robotInit() {
    try {
        Logger.logRobotInit();
        Shuffleboard.startRecording();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

@Override public void disabledInit() {
    try {
        Logger.logDisabledInit();
        mMatchState = MatchState.DISABLED;
        AutoChooser.disableAuto();
        mSubsystemManager.stop();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

@Override public void autonomousInit() {
    try {
        Logger.logAutoInit();
        mMatchState = MatchState.AUTO;
        mSubsystemManager.startAuto();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

@Override public void teleopInit() {
    try {
        Logger.logTeleopInit();
        mMatchState = MatchState.TELEOP;
        mSubsystemManager.startTeleop();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

@Override public void testInit() {
    try {
        mMatchState = MatchState.TEST;
        mSubsystemManager.startAuto();
        Logger.logMarker("Starting check systems.");
        mSubsystemManager.checkSystem();
        mSubsystemManager.stop();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

@Override public void robotPeriodic() {
    try {
        mSubsystemManager.periodicUpdate();
    } catch (Throwable t) {
        Logger.logThrowableCrash(t);
        throw t;
    }
}

public enum MatchState {
    AUTO, TELEOP, DISABLED, TEST
}
</code></pre>

<p>}</p>
